/* 1. THIẾT LẬP KHỔ GIẤY 80MM */
@page {
    size: 80mm auto;
    margin: 0;
}

@media print {

    /* --- ẨN GIAO DIỆN WEB --- */
    nav,
    header,
    footer,
    .modal,
    .offcanvas,
    .btn,
    .floating-cart,
    .no-print {
        display: none !important;
    }

    body> :not(#receipt) {
        display: none !important;
    }

    /* --- RESET BODY --- */
    html,
    body {
        width: 80mm !important;
        height: auto !important;
        min-height: 0 !important;
        margin: 0 !important;
        padding: 0 !important;
        background-color: #fff !important;
        overflow: visible !important;
    }

    /* --- CẤU HÌNH HÓA ĐƠN (#receipt) --- */
    #receipt {
        display: block !important;
        position: relative !important;
        width: 100% !important;
        margin: 0 !important;

        /* Căn lề 2 bên: Chừa 2mm để không bị mất chữ nếu máy in lệch */
        padding: 5px 4mm !important;
        box-sizing: border-box !important;

        /* Font chữ Monospace đậm nét */
        color: #000000 !important;
        font-family: 'Courier New', 'Lucida Console', monospace !important;
        font-weight: 900 !important;
        /* Ép đậm tối đa */
        font-size: 13px !important;
        line-height: 1.5 !important;
        /* Giãn dòng thoáng */

        -webkit-font-smoothing: none !important;
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
    }

    /* --- CĂN CHỈNH BỐ CỤC (LAYOUT) --- */

    /* 1. Căn giữa: Tên quán, Lời cảm ơn, Tiêu đề */
    #receipt .receipt-header,
    #receipt .receipt-footer,
    #receipt h3,
    .text-center {
        text-align: center !important;
        width: 100% !important;
        display: block !important;
        margin-bottom: 2px !important;
    }

    /* Tên quán in to hơn và viết hoa */
    #receipt h3 {
        font-size: 16px !important;
        text-transform: uppercase !important;
        margin-bottom: 5px !important;
        font-weight: 900 !important;
    }

    /* 2. Danh sách món (Table) */
    #receipt table {
        width: 100% !important;
        border-collapse: collapse !important;
        margin: 5px 0 !important;
    }

    #receipt td {
        vertical-align: top;
        padding: 6px 0 !important;
        /* Tăng khoảng cách giữa các món */
        border-bottom: 1px dotted #999 !important;
        /* Kẻ dòng mờ ngăn cách các món */
    }

    /* Cột tên món (cột 1): Căn trái */
    #receipt td:first-child {
        text-align: left !important;
        padding-right: 5px !important;
    }

    /* Cột giá tiền (cột cuối): Căn phải */
    #receipt td:last-child {
        text-align: right !important;
        white-space: nowrap !important;
        font-weight: bold !important;
    }

    /* 3. Phần Tổng cộng */
    #receipt .total-section {
        border-top: 2px dashed #000 !important;
        /* Kẻ nét đứt đậm phía trên tổng tiền */
        padding-top: 8px !important;
        /*margin-top: 8px !important;*/
        margin-bottom: 10px !important;
        font-size: 15px !important;
    }

    /* Helper căn phải */
    .text-end,
    .text-right {
        text-align: right !important;
        width: 100% !important;
        display: block;
    }

    /* Helper căn giữa flex (cho phần tổng tiền) */
    #receipt .d-flex {
        display: flex !important;
        justify-content: space-between !important;
        align-items: center !important;
    }

    /* Màu đỏ cho món chưa báo chế biến */
    .item-not-notified {
        color: #dc3545;
        font-weight: 500;
    }

    /* Màu đen cho món đã báo chế biến */
    .item-notified {
        color: #000000;
    }

    /* Ẩn phiếu chế biến khi in hóa đơn thông thường và ngược lại */
    @media print {
        .no-print {
            display: none !important;
        }

        .kitchen-receipt {
            display: block !important;
        }
    }

    /* --- XỬ LÝ ẢNH QR --- */
    #receipt img {
        display: block !important;
        margin: 10px auto !important;
        max-width: 60% !important;
        height: auto !important;
        filter: contrast(150%);
        /* Tăng tương phản cho dễ quét */
    }

    #notifyKitchenBtn {
        background-color: #ff9800;
        /* Màu cam */
        border-color: #f57c00;
        color: white;
        font-weight: bold;
        margin-bottom: 5px;
    }

    #notifyKitchenBtn:hover {
        background-color: #f57c00;
    }

}